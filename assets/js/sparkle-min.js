$(function(){"use strict";function t(t,i){this.options=i,this.init(t)}$.fn.sparkle=function(i){return this.each(function(o,s){var a=$(s),n=$.extend({color:"#FFFFFF",count:30,overlap:0,speed:1,minSize:4,maxSize:7,direction:"both"},i),e=new t(a,n);a.on({"mouseover.sparkle focus.sparkle":function(){a.trigger("start.sparkle")},"mouseout.sparkle blur.sparkle":function(){a.trigger("stop.sparkle")},"start.sparkle":function(){e.start(a)},"stop.sparkle":function(){e.stop()},"resize.sparkle":function(){e.resize(a),e.setParticles()}})})},t.prototype={init:function(t){var i={position:"absolute",top:"-"+this.options.overlap+"px",left:"-"+this.options.overlap+"px","pointer-events":"none"};if("static"===t.css("position")&&t.css("position","relative"),this.$canvas=$("<canvas>").addClass("sparkle-canvas").css(i).hide(),"auto"!==t.css("z-index")){var o=parseInt(t.css("z-index"),10);this.$canvas.css("z-index",o+1)}var s="IMG|BR|HR|INPUT",a="\\b"+t[0].nodeName+"\\b";this.isSingleton=new RegExp(a).test(s),this.isSingleton?this.$canvas.insertAfter(t):this.$canvas.appendTo(t),this.canvas=this.$canvas[0],this.context=this.canvas.getContext("2d"),this.sprite=new Image,this.sprite.src=this.datauri,this.spriteCoords=[0,6,13,20],this.canvas.width=1.2*t.outerWidth(),this.canvas.height=1.2*t.outerHeight(),this.setParticles(),this.anim=null,this.fade=!1},randomParticleSize:function(){return Math.floor(Math.random()*(this.options.maxSize-this.options.minSize+1)+this.options.minSize)},randomHexColor:function(){return"#"+("000000"+Math.floor(16777215*Math.random()).toString(16)).slice(-6)},setParticles:function(){this.particles=this.createSparkles(this.canvas.width,this.canvas.height)},createSparkles:function(t,i){for(var o=[],s=0;s<this.options.count;s++){var a;a="rainbow"===this.options.color?this.randomHexColor():"array"===$.type(this.options.color)?this.options.color[Math.floor(Math.random()*this.options.color.length)]:this.options.color;var n=Math.floor(1e3*Math.random())-500;"down"===this.options.direction?n=Math.floor(500*Math.random())-550:"up"===this.options.direction&&(n=Math.floor(500*Math.random())+50),o[s]={position:{x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*i)},style:this.spriteCoords[Math.floor(Math.random()*this.spriteCoords.length)],delta:{x:Math.floor(1e3*Math.random())-500,y:n},size:this.randomParticleSize(),color:a}}return o},draw:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<this.particles.length;t++)this.context.save(),this.context.globalAlpha=this.particles[t].opacity,this.context.drawImage(this.sprite,this.particles[t].style,0,7,7,this.particles[t].position.x,this.particles[t].position.y,this.particles[t].size,this.particles[t].size),this.options.color&&(this.context.globalCompositeOperation="source-atop",this.context.globalAlpha=.6,this.context.fillStyle=this.particles[t].color,this.context.fillRect(this.particles[t].position.x,this.particles[t].position.y,7,7)),this.context.restore()},update:function(){var t=this;this.anim=window.requestAnimationFrame(function(i){for(var o=Math.floor(i),s=0;s<t.particles.length;s++){var a=t.particles[s],n=!1,e=Math.random()>2*Math.random(),r=Math.random()<5*Math.random();e&&(a.position.x+=a.delta.x*t.options.speed/1500),r&&(a.position.y-=a.delta.y*t.options.speed/800),a.position.x>t.canvas.width?(a.position.x=-t.options.maxSize,n=!0):a.position.x<-t.options.maxSize&&(a.position.x=t.canvas.width,n=!0),a.position.y>t.canvas.height?(a.position.y=-t.options.maxSize,a.position.x=Math.floor(Math.random()*t.canvas.width),n=!0):a.position.y<-t.options.maxSize&&(a.position.y=t.canvas.height,a.position.x=Math.floor(Math.random()*t.canvas.width),n=!0),n&&(a.size=t.randomParticleSize(),a.opacity=.4),a.opacity-=t.fade?.035:.005,a.opacity<=.15&&(a.opacity=t.fade?0:1.2),o%Math.floor(7*Math.random()+1)===0&&(a.style=t.spriteCoords[Math.floor(Math.random()*t.spriteCoords.length)])}t.draw(i),t.fade?(t.fadeCount-=1,t.fadeCount<0?(window.cancelAnimationFrame(t.anim),t.$canvas.hide()):t.update()):t.update()})},resize:function(t){this.canvas.width=t.outerWidth()+2*this.options.overlap,this.canvas.height=t.outerHeight()+2*this.options.overlap,this.isSingleton&&this.$canvas.css({top:t.position().top-this.options.overlap,left:t.position().left-this.options.overlap})},start:function(t){this.resize(t),this.$canvas.show(),window.cancelAnimationFrame(this.anim);for(var i=0;i<this.options.count;i++)this.particles[i].opacity=Math.random();this.fade=!1,this.update()},stop:function(){this.fade=!0,this.fadeCount=100},datauri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAHCAYAAAD5wDa1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNDNFMzM5REEyMkUxMUUzOEE3NEI3Q0U1QUIzMTc4NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNDNFMzM5RUEyMkUxMUUzOEE3NEI3Q0U1QUIzMTc4NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM0M0UzMzlCQTIyRTExRTM4QTc0QjdDRTVBQjMxNzg2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM0M0UzMzlDQTIyRTExRTM4QTc0QjdDRTVBQjMxNzg2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+jzOsUQAAANhJREFUeNqsks0KhCAUhW/Sz6pFSc1AD9HL+OBFbdsVOKWLajH9EE7GFBEjOMxcUNHD8dxPBCEE/DKyLGMqraoqcd4j0ChpUmlBEGCFRBzH2dbj5JycJAn90CEpy1J2SK4apVSM4yiKonhePYwxMU2TaJrm8BpykpWmKQ3D8FbX9SOO4/tOhDEG0zRhGAZo2xaiKDLyPGeSyPM8sCxr868+WC/mvu9j13XBtm1ACME8z7AsC/R9r0fGOf+arOu6jUwS7l6tT/B+xo+aDFRo5BykHfav3/gSYAAtIdQ1IT0puAAAAABJRU5ErkJggg=="}});